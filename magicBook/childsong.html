<!DOCTYPE html>
<html style="width: 100%; height: 100%;" lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../CSS/icon.css">
    <link rel="stylesheet" href="../CSS/interface.css">
    <link rel="stylesheet" href="../CSS/every_four_button.css">
    <link rel="stylesheet" href="./css/childsong.css">
    <script src="./js/crawler.js"></script>

    <title>兒歌寶典</title>


</head>

<body style="width: 100%; height: 100%; margin-left: 0px;" onload="ShowTime(), songGetDate()">
    <div class="home_page">
        <a class="home_title">兒歌寶典</a>

        <div id="today"></div>
        <br>
        <div id="showtime"></div>
    </div>


    <div class="maincontent">
        <div class="song">
            <div class="songname-div">
                <h2>一禮拜</h2>
                <img class="voice" src=" ../icons/speaker.png" />

            </div>
            <div class="activity-div">
                <img src="https://children.moc.gov.tw/resource/song_image/s_480.jpg">
                <button onclick='TestCrawler("https:\/\/children.moc.gov.tw/song/480")'>
                    <img src="./image/icon_watchVideo.png" />
                    <h2>觀看兒歌</h2>
                </button>
            </div>
        </div>


        <div class="song">
            <div class="songname-div">
                <h2>讓愛看得見</h2>
                <img class="voice" src=" ../icons/speaker.png" />

            </div>
            <div class="activity-div">
                <img src="https://children.moc.gov.tw/resource/song_image/s_479.jpg">
                <button onclick='showWeb("https:\/\/children.moc.gov.tw/song/479")'>
                    <img src="./image/icon_watchVideo.png" />
                    <h2>觀看兒歌</h2>
                </button>
            </div>
        </div>

        <div class="song">
            <div class="songname-div">
                <h2>阿不倒</h2>
                <img class="voice" src=" ../icons/speaker.png" />

            </div>
            <div class="activity-div">
                <img src="https://children.moc.gov.tw/resource/song_image/s_478.jpg">
                <button onclick='showWeb("https:\/\/children.moc.gov.tw/song/478")'>
                    <img src="./image/icon_watchVideo.png" />
                    <h2>觀看兒歌</h2>
                </button>
            </div>
        </div>

        <div class="song">
            <div class="songname-div">
                <h2>露珠</h2>
                <img class="voice" src=" ../icons/speaker.png" />

            </div>
            <div class="activity-div">
                <img src="https://children.moc.gov.tw/resource/song_image/s_477.jpg">
                <button onclick='showWeb("https:\/\/children.moc.gov.tw/song/477")'>
                    <img src="./image/icon_watchVideo.png" />
                    <h2>觀看兒歌</h2>
                </button>
            </div>
        </div>

        <div class="song">
            <div class="songname-div">
                <h2>疊羅漢</h2>
                <img class="voice" src=" ../icons/speaker.png" />

            </div>
            <div class="activity-div">
                <img src="https://children.moc.gov.tw/resource/song_image/s_476.jpg">
                <button onclick='showWeb("https:\/\/children.moc.gov.tw/song/476")'>
                    <img src="./image/icon_watchVideo.png" />
                    <h2>觀看兒歌</h2>
                </button>
            </div>
        </div>

        <div class="song">
            <div class="songname-div">
                <h2>雨的花蕊</h2>
                <img class="voice" src=" ../icons/speaker.png" />

            </div>
            <div class="activity-div">
                <img src="https://children.moc.gov.tw/resource/song_image/s_475.jpg">
                <button onclick='showWeb("https:\/\/children.moc.gov.tw/song/475")'>
                    <img src="./image/icon_watchVideo.png" />
                    <h2>觀看兒歌</h2>
                </button>
            </div>
        </div>

        <div class="song">
            <div class="songname-div">
                <h2>Snbarux 換工</h2>
                <img class="voice" src=" ../icons/speaker.png" />

            </div>
            <div class="activity-div">
                <img src="https://children.moc.gov.tw/resource/song_image/s_474.jpg">
                <button onclick='showWeb("https:\/\/children.moc.gov.tw/song/474")'>
                    <img src="./image/icon_watchVideo.png" />
                    <h2>觀看兒歌</h2>
                </button>
            </div>
        </div>

        <div class="song">
            <div class="songname-div">
                <h2>白鶴</h2>
                <img class="voice" src=" ../icons/speaker.png" />

            </div>
            <div class="activity-div">
                <img src="https://children.moc.gov.tw/resource/song_image/s_473.jpg">
                <button onclick='showWeb("https:\/\/children.moc.gov.tw/song/473")'>
                    <img src="./image/icon_watchVideo.png" />
                    <h2>觀看兒歌</h2>
                </button>
            </div>
        </div>

        <div class="song">
            <div class="songname-div">
                <h2>燕子回來的時候</h2>
                <img class="voice" src=" ../icons/speaker.png" />
            </div>
            <div class="activity-div">
                <img src="https://children.moc.gov.tw/resource/song_image/s_472.jpg">
                <button onclick='showWeb("https:\/\/children.moc.gov.tw/song/472")'>
                    <img src="./image/icon_watchVideo.png" />
                    <h2>觀看兒歌</h2>
                </button>
            </div>
        </div>

    </div>


    <div class="return_mark">
        <a href="./magicBook.html" class="returnfloat" id="menu-share">
            <i class="fab fa-share return-float"><img src="../photo/return.png"></i>
        </a>
    </div>

    <div class="home_mark">
        <a href="../game_home.html" class="homefloat" id="menu-share">
            <i class="fab fa-share my-float"><img src="../photo/gobackhome.png" width="70%"></i>
        </a>
    </div>

    <script>
        function ShowTime() {

            var fullDate = new Date();
            var yyyy = fullDate.getFullYear();
            var MM = (fullDate.getMonth() + 1) >= 10 ? (fullDate.getMonth() + 1) : ("0" + (fullDate.getMonth() + 1));
            var dd = fullDate.getDate() < 10 ? ("0" + fullDate.getDate()) : fullDate.getDate();
            document.getElementById('today').innerHTML = yyyy + "/" + MM + "/" + dd;

            var NowDate = new Date();
            var h = NowDate.getHours();
            var m = NowDate.getMinutes();
            document.getElementById('showtime').innerHTML = h + ':' + m;
            setTimeout('ShowTime()', 1000);
        }

        function toggleBtn() {
            const Btns = document.querySelector(".btns");
            const add = document.getElementById("add");
            const remove = document.getElementById("remove");
            const btn = document.querySelector(".btns").querySelectorAll("a");
            Btns.classList.toggle("open");
            if (Btns.classList.contains("open")) {
                remove.style.display = "block";
                add.style.display = "none";
                btn.forEach((e, i) => {
                    setTimeout(() => {
                        bottom = 65 * i;
                        e.style.bottom = bottom + "px";
                        console.log(e);
                    }, 100 * i);
                });
            } else {
                add.style.display = "block";
                remove.style.display = "none";
                btn.forEach((e, i) => {
                    e.style.bottom = "0px";
                });
            }
        }
    </script>

    <script>
        const puppeteer = require('puppeteer');

        function createSong() {
            (async () => {
                let browser = await puppeteer.launch({
                    executablePath: 'C:/Program Files (x86)/Google/Chrome/Application/chrome.exe',
                    headless: false
                });

                const page = await browser.newPage();
                await page.goto(`https://children.moc.gov.tw/song_list?page=2&language=0`);

                for (let i = 2; i <= 10; i++) {
                    const songbox = await page.$$('.songbox')
                    const next = await page.$('.next')
                    for (let j = 0; j < songbox.length; j++) {
                        const href = await (songbox[j].$eval('a', al => al.getAttribute('href')))
                        const src = await (songbox[j].$eval('img', al => al.getAttribute('src')))
                        const name = await (songbox[j].$eval('h2', al => al.textContent.trim()))
                        const main = await document.querySelector('.maincontent');

                        main.innerHTML +=
                            `
                        <div class="song">
                            <div class="songname-div">
                                <h2>${name}</h2>
                                <img class="voice" src=" ../icons/speaker.png" />
                            </div>
                            <div class="activity-div">
                                <img src="${src}">
                                <button onclick='showWeb("https://children.moc.gov.tw${href}")'>
                                    <img src="./image/icon_watchVideo.png" />
                                    <h2>觀看兒歌</h2>
                                </button>
                            </div>
                         </div>
                         `
                    }
                    await (next.$eval('a', al => al.click()))

                }




                // await browser.close();
            })();
        }
    </script>
    <script src="./js/childsong.js"></script>

</body>

</html>